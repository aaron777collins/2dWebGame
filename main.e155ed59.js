(()=>{"use strict";var e,t={883:(e,t,n)=>{var i=n(365),a=n(131),r=n(643),o=n(138),s=n(661),c=n(122),d=n(188),m=n(221),l=n(466),p=n.n(l);const u=new i.x,f=new a.i(window.innerWidth/-2,window.innerWidth/2,window.innerHeight/2,window.innerHeight/-2,1,1e3);f.position.z=10;const w=new r.C;w.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(w.domElement);const h=new(p());function y(){h.begin(),function(){k.attacking||(k.flipped=function(){let e=k.flipped;return!b.LEFT||b.UP||b.DOWN?(b.RIGHT||b.UP||b.DOWN)&&(e=!1):e=!0,e}(),b.LEFT?(k.velocity.x=-k.speed,v.currentAnimation="walkRight",v.mostRecentDirection="right"):b.RIGHT&&(k.velocity.x=k.speed,v.currentAnimation="walkRight",v.mostRecentDirection="right"),b.UP?(k.velocity.y=k.speed,v.currentAnimation="walkBack",v.mostRecentDirection="back"):b.DOWN&&(k.velocity.y=-k.speed,v.currentAnimation="walk",v.mostRecentDirection="normal"),b.SPACE&&!k.attacking&&(k.attacking=!0,k.velocity.x/=2,k.velocity.y/=2,"normal"===v.mostRecentDirection?v.currentAnimation="attack":"back"===v.mostRecentDirection?v.currentAnimation="attackBack":"right"===v.mostRecentDirection?v.currentAnimation="attackRight":v.currentAnimation="attack")),k.velocity.x*=k.speedFrictionRatio,Math.abs(k.velocity.x)<.1&&(k.velocity.x=0),k.velocity.y*=k.speedFrictionRatio,Math.abs(k.velocity.y)<.1&&(k.velocity.y=0);let e=k.attacking;Object.keys(b).forEach((t=>{b[t]&&(e=!0)})),e||0!==k.velocity.x||0!==k.velocity.y||("normal"===v.mostRecentDirection?v.currentAnimation="idle":"back"===v.mostRecentDirection?v.currentAnimation="idleBack":"right"===v.mostRecentDirection?v.currentAnimation="idleRight":v.currentAnimation="idle"),k.sprite.position.x+=k.velocity.x,k.sprite.position.y+=k.velocity.y}(),g(),h.end(),requestAnimationFrame(y)}function g(){x(),w.render(u,f)}window.addEventListener("resize",(function(){f.left=window.innerWidth/-2,f.right=window.innerWidth/2,f.top=window.innerHeight/2,f.bottom=window.innerHeight/-2,f.updateProjectionMatrix(),w.setSize(window.innerWidth,window.innerHeight),g()}),!1);const k={sprite:null,flipped:!1,velocity:new o.F(0,0),speed:3,speedFrictionRatio:.9,textures:[],attacking:!1},v={idle:{startFrame:0,endFrame:5,framesMissing:0},idleRight:{startFrame:6,endFrame:11,framesMissing:0},idleBack:{startFrame:12,endFrame:17,framesMissing:0},walk:{startFrame:18,endFrame:23,framesMissing:0},walkRight:{startFrame:24,endFrame:29,framesMissing:0},walkBack:{startFrame:30,endFrame:35,framesMissing:0},attack:{startFrame:36,endFrame:41,framesMissing:2},attackRight:{startFrame:42,endFrame:47,framesMissing:2},attackBack:{startFrame:48,endFrame:53,framesMissing:2},die:{startFrame:54,endFrame:59,framesMissing:3},mostRecentDirection:"normal",currentAnimation:"idle",previousAnimation:"",animationElapsedTime:0,animationDuration:100,animationTimeOffset:0,x_tiles:6,y_tiles:10};function x(){v.previousAnimation!==v.currentAnimation&&(v.animationTimeOffset=-h.domElement.ownerDocument.defaultView.performance.now()),v.previousAnimation=v.currentAnimation;const e=v[v.currentAnimation];if(e&&(v.animationElapsedTime+=v.animationTimeOffset+h.domElement.ownerDocument.defaultView.performance.now(),v.animationElapsedTime>=v.animationDuration)){const t=e.startFrame,n=e.endFrame,i=(t+Math.floor(v.animationElapsedTime/v.animationDuration)-1)%(n-t+1);if(i>=n-t+1-e.framesMissing)return k.attacking=!1,"right"===v.mostRecentDirection?v.currentAnimation="idleRight":"back"===v.mostRecentDirection?v.currentAnimation="idleBack":v.currentAnimation="idle",void x();k.flipped?(k.sprite.material.map=k.textures[n-i],k.sprite.material.map.offset.x=-1*Math.abs(k.sprite.material.map.offset.x),k.sprite.material.map.repeat.x=-1*Math.abs(k.sprite.material.map.repeat.x)):(k.sprite.material.map=k.textures[t+i],k.sprite.material.map.offset.x=Math.abs(k.sprite.material.map.offset.x),k.sprite.material.map.repeat.x=Math.abs(k.sprite.material.map.repeat.x)),k.sprite.material.needsUpdate=!0,v.animationElapsedTime=0}}const b={UP:!1,DOWN:!1,LEFT:!1,RIGHT:!1,SPACE:!1};function A(e){switch(e.code){case"ArrowLeft":b.LEFT=!0,b.RIGHT=!1;break;case"ArrowRight":b.RIGHT=!0,b.LEFT=!1;break;case"ArrowUp":b.UP=!0,b.DOWN=!1;break;case"ArrowDown":b.DOWN=!0,b.UP=!1;break;case"Space":b.SPACE=!0}}function F(e){switch(e.code){case"ArrowLeft":b.LEFT=!1;break;case"ArrowRight":b.RIGHT=!1;break;case"ArrowUp":b.UP=!1;break;case"ArrowDown":b.DOWN=!1;break;case"Space":b.SPACE=!1}}function R(){document.getElementById("help-text").style.display="none",window.removeEventListener("keydown",R)}window.addEventListener("DOMContentLoaded",(()=>{!function(){const e=document.createElement("div");e.innerHTML="Use the arrow keys to move and space to attack",e.style.position="absolute",e.style.top="50%",e.style.left="50%",e.style.transform="translate(-50%, -50%)",e.style.color="white",e.style.fontSize="20px",e.style.fontFamily="sans-serif",e.style.zIndex="1",e.id="help-text",document.body.appendChild(e),window.addEventListener("keydown",R)}(),document.body.appendChild(h.dom),h.showPanel(0),function(){const e=(new m.d).load("static/background.jpg"),t=new c.x({map:e,color:16777215}),n=new d.j(t);n.scale.set(2e3,1e3,1),n.position.set(0,0,-5),u.add(n)}();const e=(new m.d).load("static/character.png",(t=>{const n=function(e,t=1,n=1){const i=function(e,t,n,i=!1){const a=[];for(let i=0;i<n;i++)for(let r=t-1;r>=0;r--){const o=e.clone();o.needsUpdate=!0,o.repeat.set(1/t,1/n),o.offset.set(r/t,i/n),a.push(o)}return a}(e,t,n).reverse();i.forEach((e=>{e.wrapS=s.rpg}));const a=new c.x({map:i[0],color:16777215});a.side=s.ehD,a.transparent=!0;const r=new d.j(a);return r.scale.set(100,100,1),u.add(r),{sprite:r,textures:i}}(e,v.x_tiles,v.y_tiles);k.sprite=n.sprite,k.textures=n.textures,window.addEventListener("keydown",A),window.addEventListener("keyup",F),y()}),(e=>{const t=document.createElement("div");t.style.position="absolute",t.style.top="50%",t.style.left="50%",t.style.transform="translate(-50%, -50%)",t.innerText=`${Math.round(e.loaded/e.total*100)}%`,document.body.appendChild(t)}),(e=>{console.error("Unexpected error while loading texture: ",e);const t=document.createElement("div");t.style.position="absolute",t.style.top="50%",t.style.left="50%",t.style.transform="translate(-50%, -50%)",t.innerText="Unexpected error while loading texture",document.body.appendChild(t)}))}))}},n={};function i(e){var a=n[e];if(void 0!==a)return a.exports;var r=n[e]={exports:{}};return t[e].call(r.exports,r,r.exports,i),r.exports}i.m=t,e=[],i.O=(t,n,a,r)=>{if(!n){var o=1/0;for(m=0;m<e.length;m++){for(var[n,a,r]=e[m],s=!0,c=0;c<n.length;c++)(!1&r||o>=r)&&Object.keys(i.O).every((e=>i.O[e](n[c])))?n.splice(c--,1):(s=!1,r<o&&(o=r));if(s){e.splice(m--,1);var d=a();void 0!==d&&(t=d)}}return t}r=r||0;for(var m=e.length;m>0&&e[m-1][2]>r;m--)e[m]=e[m-1];e[m]=[n,a,r]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={179:0};i.O.j=t=>0===e[t];var t=(t,n)=>{var a,r,[o,s,c]=n,d=0;if(o.some((t=>0!==e[t]))){for(a in s)i.o(s,a)&&(i.m[a]=s[a]);if(c)var m=c(i)}for(t&&t(n);d<o.length;d++)r=o[d],i.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return i.O(m)},n=self.webpackChunk=self.webpackChunk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var a=i.O(void 0,[374],(()=>i(883)));a=i.O(a)})();